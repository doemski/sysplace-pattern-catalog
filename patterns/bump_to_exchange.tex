\input{header.tex}

\newcommand{\name}{Bump To Exchange}

% -------------------------------
% WAS
% -------------------------------

\newcommand{\desc}{Zwei Benutzer haben \data e\ auf ihren Geräten und wollen jene durch direkten Kontakt miteinander teilen, sodass anschließend beide \data e\ auf beiden Geräten verfügbar sind.}

\newcommand{\solution}{Beide Benutzer haben ihre Geräte in der Hand. Durch das leichte Zusammenstoßen (\glslink{bump}{Bumpen}) der Geräte werden die \data e\ auf das jeweils andere Gerät übertragen.}

%\newcommand{\category}{give}
%\newcommand{\category}{take}
\newcommand{\category}{exchange}
%\newcommand{\category}{extend}
%\newcommand{\category}{connect}

% -------------------------------
% WIE
% -------------------------------

\newcommand{\usersEqual}{}
\newcommand{\useraction}{Die Benutzer halten ihre Geräte in der Hand und stoßen sie leicht aneinander.  Ein \data\ ist entweder explizit von den Benutzern (z.B. ein Foto) oder implizit durch die Applikation (z.B. Kontaktinformationen) zum Versenden ausgewählt worden. Zudem besteht eine Verbindung zwischen den Geräten.}

\newcommand{\reactionSen}{Auf den Geräten sollte zu verschiedenen Phasen des Bumps Feedback gegeben werden. Ein Bump besteht aus den drei \glslink{atomareinteraktion}{atomaren Interaktionen} \textit{Move}, \textit{Abrupt Stop} und \textit{Bump Recognized}.\\
Da es sich bei \textbf{Bump to Exchange} um eine \gls{synchronegeste} handelt, werden nach dem Bump die \glslink{accelerometer}{Accelerometerdaten} der beteiligten Geräte verglichen. Sind die Daten ähnlich genug, gilt der Bump als \textit{erfolgreich}. Bei einem \textit{erfolgreich} ausgeführten Bump finden alle atomaren Interaktionen statt, nach Beendigung der letzten wird der Transfer des selektierten \data s\ ausgeführt. Bei \textit{nicht erfolgreichem} Bump wird kein Transfer ausgeführt.\\
Bei einem erfolgreichen Datentransfer (Atomare Reaktion \textit{Receive}) sollte den Benutzern Feedback über den Empfang des \data s\ gegeben werden.}

\newcommand{\microinteractionstabular}{
\begin{figure}[H]
\begin{table}[H]
\renewcommand{\arraystretch}{2}\addtolength{\tabcolsep}{-2pt}
\centering
\newcolumntype{b}{X}
\newcolumntype{t}{>{\hsize=.3\hsize}X}
\newcolumntype{s}{>{\hsize=.2\hsize}c}
\newcolumntype{m}{>{\hsize=.6\hsize}X}
\begin{tabularx}{\textwidth}{tsbbm}
\thead[X]{Name} & \thead[c]{Typ*} & \thead[X]{Trigger} & \thead[X]{Regeln} & \thead[X]{Feedback} \\
\hline
Move & M & Gerät wurde bewegt (Accelerometerdaten) & \data\ ist ausgewählt &  Animation 1 \\ 
\hline
Abrupt Stop & M & Das Gerät ist mit etwas hartem zusammengestoßen (Accelerometerdaten) & Accelerometerdaten erfüllen Bump-Anforderungen & Animation 2 \\ 
\hline
Bump Recognized & S & Bump-Daten von anderem Gerät empfangen und mit eigenen verglichen & Accelerometerdaten beider Geräte ähnlich genug & Animation 3 \\ 
\hline
Receive & S & Daten empfangen & \data\ ist darstellbar & Animation 4 \newline Vibration \\
\hline
\end{tabularx}
\end{table}
\caption{Atomare Interaktionen für das Bump to Exchange Pattern}
\end{figure}
*Typ: (M)anuell, (S)ystem
}

\newcommand{\animations}{
\begin{enumerate}
\item Move-Animation: visualisiert dem Benutzer, dass das physische Bewegen des Geräts eine Funktionalität darstellt (z.B. Das Datenobjekt bewegt sich etwas verzögert, als hätte es Masse)
\item Abrupt Stop-Animation: visualisiert dem Benutzer, dass ein Bump auf seinem Gerät erkannt wurde (z.B. Das \data\ bleibt am angestoßenen Rand des Bildschirms)
\item Bump Recognized-Animation: visualisiert dem Benutzer, dass die Bump-Geste richtig erkannt wurde und das \data\ versandt wurde (z.B. Das \data\ verlässt den Bildschirm in Richtung des \recdev{}s)
\item Receive-Animation: visualisiert dem Benutzer, dass ein \data\ empfangen wurde (z.B. Das \data\ kommt auf den Bildschirm aus der Richtung des \sendev{}s)
\end{enumerate}
}

\newcommand{\designnotes}{ 
Beim Ausführen der Bump-Geste sollten die Geräte direkt aneinandergestoßen werden um eine möglichst gute Erkennung zu gewährleisten. Zudem sollte die Härte des Zusammenstoßes stark genug sein um eine Erkennung zu ermöglichen, jedoch die Geräte nicht beschädigen.}

%--------------------------------
% WANN
% -------------------------------
\newcommand{\validcontext}{Datenaustausch von Bildern, Videos, Visitenkarten, Social Network IDs, Systembefehlen zwischen Nutzern mobiler Privatgeräte.}

\newcommand{\simultaneously}{}
%\newcommand{\sequentially}{}

\newcommand{\private}{}
\newcommand{\semipublic}{}
\newcommand{\public}{}
\newcommand{\stationary}{}
\newcommand{\onthego}{}

\newcommand{\leanback}{}
\newcommand{\leanforward}{}

\newcommand{\single}{}
\newcommand{\collaboration}{}
\newcommand{\facetoface}{}
\newcommand{\sidetoside}{}

\newcommand{\notvalidcontext}{--- keine Information ---}

\newcommand{\devicetabular}{
\begin{figure}[H]
\begin{tabular}{|c|c|c|c|c|c|}
\hline 
\diagbox{von}{nach} & Smartwatch & Smartphone & Tablet & Tabletop & Screens \\ 
\hline 
Smartwatch          &     x      &     x      &   x    &          &        \\ 
\hline 
Smartphone          &     x      &     x      &   x    &          &        \\ 
\hline 
Tablet              &     x      &     x      &   x    &          &        \\ 
\hline 
Tabletop            &            &            &        &          &        \\ 
\hline
Screens             &            &            &        &          &         \\ 
\hline 
\end{tabular}
\caption{Geräteklassen für das Bump To Exchange Pattern} 
\end{figure}
}

% -------------------------------
% WARUM
% -------------------------------

%\newcommand{\established}{}
\newcommand{\candidate}{}
\newcommand{\realizable}{}
%\newcommand{\futuristic}{}

\newcommand{\otherpatterns}{
\begin{itemize}
\item Bump To Give
\item Bump To Take
\item Bump To Connect
\item Nudge
\end{itemize}
}

\newcommand{\stateoftheart}{
\begin{enumerate}
\item Bump App: Bis 2014 in den App/Play Stores erhältlich gewesen [\url{http://bu.mp/}]
\item Beispiel-Implementierung eines Bump Patterns \citep{Grab2015}.
\item Ken Hinckley - Forschung zu Bump-Gesten im Speziellen und Definition synchroner Gesten im Allgemeinen \citep{Hinckley2003}.
\end{enumerate}
}

\newcommand{\designprinciples}{}

\newcommand{\imageschemata}{}
%\newcommand{\imageSchemaVoid}{}
\newcommand{\imageSchemaObject}{}
%\newcommand{\imageSchemaSubstance}{}
%\newcommand{\imageSchemaCenterPeriphery}{}
%\newcommand{\imageSchemaContact}{}
%\newcommand{\imageSchemaFrontBack}{}
%\newcommand{\imageSchemaLocation}{}
%\newcommand{\imageSchemaNearFar}{}
%\newcommand{\imageSchemaPath}{}
\newcommand{\imageSchemaSourcePathGoal}{}
%\newcommand{\imageSchemaScale}{}
%\newcommand{\imageSchemaLeftRight}{}
\newcommand{\imageSchemaContainer}{}
\newcommand{\imageSchemaContent}{}
%\newcommand{\imageSchemaFullEmpty}{}
\newcommand{\imageSchemaInOut}{}
%\newcommand{\imageSchemaSurface}{}
%\newcommand{\imageSchemaMerging}{}
%\newcommand{\imageSchemaSplitting}{}
\newcommand{\imageSchemaMomentum}{}
%\newcommand{\imageSchemaSelfMotion}{}
%\newcommand{\imageSchemaBigSmall}{}
\newcommand{\imageSchemaFastSlow}{}
%\newcommand{\imageSchemaPartWhole}{}

\newcommand{\realworld}{}
\newcommand{\realworldNaivePhysic}{}
\newcommand{\realworldBodyAwareness}{}
\newcommand{\realworldEnvironmentAwareness}{}
\newcommand{\realworldSocialAwareness}{}

\newcommand{\metaphor}{}
\newcommand{\metaphordesc}{Fistbump, Anstoßen (wie mit Getränken)}

% -------------------------------
% TECHNISCHES
% -------------------------------

\newcommand{\requiredTechnologies}{
Um Bump To Exchange auf einem Gerät (\textit{Device}) ausführen zu können, gibt es einige Voraussetzungen und Einschränkungen bezüglich der in dem Gerät verfügbaren Technologien. Ein Gerät ist dann verwendbar, wenn es folgende Eigenschaften aufweist (s. Abbildung \ref{bump_hardware}):
\begin{itemize}
\item \textbf{Input}: Unbedingte Voraussetzung für die Erkennung von Bump-Gesten ist die Möglichkeit, die Beschleunigung eines Geräts messen zu können. Dazu wird in mobilen Geräten zumeist ein \Gls{accelerometer} verbaut, dessen Werte von Applikationen verarbeitet werden können.
\item \textbf{Output}: Je nachdem, welches Feedback dem User gegeben werden soll, sind visueller Output (Bildschirm) sowie Vibration und Sound einsetzbar, um erkannte Geräte und aufgebaute Verbindungen zu signalisieren.
\item \textbf{Connectivity}: Ziel der Bump To Exchange Geste ist die Dateiübertragung zwischen zwei Geräten, die bereits über ein Ad-Hoc Netzwerk wie Bluetooth oder WiFi Direct miteinander verbunden sind. Alternativ kann auch eine Vermittlungskomponente (Server) genutzt werden, der den Datenaustausch zentral verwaltet und die Bump-Erkennung durchführt.
\end{itemize}

\begin{figure}[h]
\includegraphics[width=\textwidth]{bump_hardware.png}
\caption{Benötigte Technologien für das Bump To Exchange Pattern}
\label{bump_hardware}
\end{figure}
}

\newcommand{\implementation}{
\subsubsection*{Erkennung synchroner Gesten}
Bei der Geste Bump To Exchange handelt es sich um eine \gls{synchronegeste}. Abbildung \ref{sync_gesture_detection} zeigt den Ablauf der synchronen Gestenerkennung, die in mehrere Teile zerfällt:

\begin{figure}[h]
\includegraphics[width=\textwidth]{synchronous_gesture_detection.png}
\caption{Allgemeiner Ablauf einer synchronen Gestenerkennung}
\label{sync_gesture_detection}
\end{figure}

\begin{itemize}
\item Registrierung bei einer zentralen Vermittlungskomponente,
\item Erkennung der Einzelanteile einer synchronen Geste pro Gerät (\textit{Gesture Detection)}, entspricht jeweils der Erkennung für \glspl{einfachegeste},
\item Vergleich der resultierenden \textit{GestureEvents} aus der einfachen Gestenerkennung (\textit{Gesture Event Matching}) durch die Vermittlungskomponente und
\item Vermittlung von Verbindungsdaten, wenn die Geste erfolgreich erkannt wurde.
\end{itemize}

Nach Registrierung bei der zentralen Vermittlungskomponente führen Geräte kontinuierlich eine lokale, einfache Gestenerkennung basierend auf Sensordaten (Hard- oder Software) durch (\textit{Gesture Detection)}. Wurde  eine Geste lokal erkannt und an das entsprechende \textit{GestureEvent} an die Vermittlungskomponente gesendet, entscheidet diese, ob alle erforderlichen komplementären Anteile der synchronen Geste durch andere Geräte ebenfalls übermittelt wurden (\textit{Gesture Event Matching}). Die folgenden beiden Kapitel erläutern diese beiden Schritte für die Bump To Exchange Geste jeweils im Detail.

Da bei Bump To Exchange bereits eine Verbindung zwischen den Geräten besteht, ist es auch möglich, dass eins der Geräte das \textit{Bump Event Matching} durchführt und dadurch als Vermittlungskomponente fungiert.


\subsubsection*{Bump Gesture Detection}
Die Gesture Detection für Bump Gesten speichert eine Reihe von Beschleunigungsvektoren des Accelerometers, sobald ein anfänglicher Schwellwert (Parameter \texttt{threshold}) überschritten wurde (Übergang vom state \texttt{idle} in den state \texttt{recording}). Die Anzahl der gespeicherten Beschleunigungsvektoren vor dem Übergang in den state \texttt{Counting Peaks} hängt vom Parameter \texttt{win\-dow\_size} ab. Im state \texttt{Counting Peaks} werden sog. \texttt{peaks} (Spitzen) in der Beschleunigung gezählt, also Beschleunigungsvektoren, deren Betrag jeweils größer oder kleiner als die der nächsten Nachbarn in der Liste ist. Ist die Anzahl der \texttt{peaks} größer als der Parameter \texttt{min\_peaks}, wird ein Bump erkannt und an die Vermittlungskomponente übermittelt (s. Abbildung \ref{sync_gesture_detection}).

\begin{figure}[H]
\includegraphics[width=\textwidth]{bump_recognize.png}
\caption{Gesture Detection der Bump Geste lokal auf einem Gerät}
\label{recognize_bump}
\end{figure}

Über die drei Parameter \texttt{threshold}, \texttt{min\_peaks} sowie \texttt{window\_size} lässt sich die Empfindlichkeit der Bump-Erkennung einstellen bzw. Ungenauigkeiten bei der Verwendung unterschiedlicher Accelerometer ausgleichen.

\subsubsection*{Bump Event Matching}
Die Vermittlungskomponente führt ein \textit{Bump Event Matching} durch, wenn von zwei Geräten \textit{BumpEvents} empfangen wurden, die als komplementäre Anteile einer synchronen Geste in Frage kommen könnten. Abbildung \ref{bump_event_matching} veranschaulicht einen exemplarischen Ablauf dieses Vergleiches.

\begin{figure}[H]
\includegraphics[width=\textwidth]{bump_event_matching.png}
\caption{Bump Event Matching - Vergleichen zweier Bump Events durch die Vermittlungskomponente}
\label{bump_event_matching}
\end{figure}

Grundsätzlich kann der Vergleich anhand beliebiger Parameter vorgenommen werden, die im übermittelten \textit{BumpEvent} enthalten sind. Das Beispiel in Abbildung \ref{bump_event_matching} vergleicht zwei Events anhand ihrer
\begin{itemize}
\item höchsten Peaks (\texttt{max\_peak\_a} bzw. \texttt{max\_peak\_b}) mit einer konfigurierbaren Toleranz von \texttt{max\_peak\_delta} und
\item ihrer Zeitstempel (\texttt{timestamp\_end\_a} und \texttt{timestamp\_end\_b}) mit einer  konfigurierbaren Toleranz von \texttt{max\_time\_delta}.
\end{itemize} 

Weitere Vergleiche sind denkbar, sofern die \textit{Bump Gesture Detection} diese Werte im \textit{BumpEvent} zur Verfügung stellt.

Entsprechend dem Lebenszyklus einer Multiscreen-Applikation ist die Voraussetzung für Bump To Exchange eine bestehende Verbindung zwischen zwei Geräten (vorangegangener \textit{Connect}) und die Auswahl zu übermittelnder Daten (\textit{Select}) auf \textbf{beiden} Geräten. Bump To Exchange kann mehrmals hintereinander ausgeführt werden (Sequenz von \textit{Transfers}), solange kein \textit{Disconnect} erfolgt ist. \\

Weitergehende Informationen zum Applikations-Lebenszyklus und den weiteren
Gestaltungsmöglichkeiten für den \textit{Transfer}, \textit{Feedbacks} etc. finden sich
auf der \developerpage.
}



% -------------------------------
% SONSTIGES
% -------------------------------

\newcommand{\authors}{
Benjamin Grab, Hochschule Mannheim\\
Valentina Burjan, Hochschule Mannheim\\
Horst Schneider, Hochschule Mannheim\\
Dominick Madden, Hochschule Mannheim}


\newcommand{\versionhistory}{10.05.2017}
\newcommand{\dateofcreation}{15.08.2015}


% template inkludieren --------------

\input{template.tex}
