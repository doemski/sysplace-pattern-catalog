\input{header.tex}

\newcommand{\name}{Stitch To Take}

% -------------------------------
% WAS
% -------------------------------

\newcommand{\desc}{Ein Benutzer (der \rec) hat ein \recdev\ und will von einem anderem Benutzer (dem \sen) bzw. einem \sendev\ ein \data\ anfordern. Die Geräte befinden sich in unmittelbarer Nähe zueinander. Das \data\ soll vom \sendev\ auf das \recdev\ übertragen werden, sodass es anschließend auf beiden Geräten verfügbar ist.}

\newcommand{\solution}{Der \rec{} hält die Geräte aneinander, sodass sie sich berühren und die Bildschirme parallel zueinander sind. Er führt seinen Finger von einem Punkt auf dem Bildschirm des \sendev{}s über die Bildschirmgrenzen hinweg auf den Bildschirm des \recdev{}s, woraufhin das \data\ übertragen wird.}

%\newcommand{\category}{give}
\newcommand{\category}{take}
%\newcommand{\category}{exchange}
%\newcommand{\category}{extend}
%\newcommand{\category}{connect}

% -------------------------------
% WIE
% -------------------------------

\newcommand{\useraction}{Der \rec\ hat das \recdev\ entweder auf einer Oberfläche - Kante an Kante - neben dem \sendev\ liegen, oder hat es in der Hand und hält es neben das \sendev{}. Er führt eine \gls{stitch}-Geste aus.}

\newcommand{\swapReactions}{}

\newcommand{\reactionRec}{

Auf beiden Geräten sollte zu den verschiedenen Phasen des Stitch Feedback gegeben werden. Technisch besteht ein Stitch aus zwei aufeinanderfolgenden Swipes, wobei der erste von der Bildschirmmitte zum Rand des \sendev{}s führt und der zweite vom Bildschirmrand zur Mitte des \recdev{}s. Jeder der beiden Swipes besteht aus den drei \glslink{atomareinteraktion}{atomaren Interaktionen} \textit{Touch}, \textit{Move} und \textit{Release}.\\
Da es sich bei \textbf{Stitch to Take} um eine \gls{synchronegeste} handelt, werden nach dem Stitch einige relevante Daten (Richtung, Timestamp, Orientierung) der beiden Swipes verglichen. Entsprechen die Daten einem Stitch, so wird das \data\ versendet. 
}

\newcommand{\reactionSen}{
Auf dem \sendev{} werden die selben atomaren Interaktionen ausgeführt wie auf dem \recdev{}. Das Gerät sollte dem Benutzer Feedback über den ausgehenden Stitch geben.
}

\newcommand{\microinteractionstabular}{
\begin{figure}[H]
\begin{table}[H]
\renewcommand{\arraystretch}{2}\addtolength{\tabcolsep}{-2pt}
\centering
\newcolumntype{b}{X}
\newcolumntype{t}{>{\hsize=.3\hsize}X}
\newcolumntype{s}{>{\hsize=.2\hsize}c}
\newcolumntype{m}{>{\hsize=.6\hsize}X}
\begin{tabularx}{\textwidth}{tsbbm}
\thead[X]{Name} & \thead[c]{Typ*} & \thead[X]{Trigger} & \thead[X]{Regeln} & \thead[X]{Feedback} \\
\hline
Touch & M & Touch Down Event auf dem Screen & Touch auf dem \data\ & Animation 1 \\ 
\hline
Move & M & Touch Move Event auf dem Screen & 
Touch ausgeführt, \newline Release nicht ausgeführt & Animation 2 \\ 
\hline
Release & M & Touch Up Event auf dem Screen & Swipelänge OK, \newline Swipedauer OK, \newline Swipeorientierung OK & Animation 3 \\ 
\hline
Stitch Recognized & S & Swipe-Daten wurden miteinander verglichen & Swipe-Daten entsprechen Charakteristiken eines Stitch & Animation 4  \\
\hline
Receive & S & Daten empfangen & \data\ ist darstellbar & Animation 5  \\
\hline
\end{tabularx}
\end{table}
\caption{Atomare Interaktionen für das Stitch to Give Pattern}
\end{figure}
*Typ: (M)anuell, (S)ystem
}

\newcommand{\animations}{
\begin{enumerate}
\item Touch-Animation: visualisiert dem Benutzer, dass ein Stitch das Versenden des \data\ auslöst (z.B. Das \data\ liegt auf Schienen, die über die Bildschirmränder fortgeführt werden und auf dem \recdev{} enden. Bei Berührung wird eine Ampel von rot auf grün gesetzt)
\item Move-Animation: visualisiert dem Benutzer, dass das \data\ beweglich ist (z.B. Drag \& Drop Funktionalität entlang der Schienen)
\item Release-Animation: visualisiert dem Benutzer, dass der Swipe erfolgreich ausgeführt wurde (z.B. \sendev{}: Das \data\ fährt zur Hälfte aus dem Bildschirm heraus. Ampel wechselt auf gelb \recdev{}: Ampel wechselt von rot auf gelb)
\item Stitch-Recognized-Animation: visualisiert dem Benutzer, dass der ausgeführte Stitch erfolgreich erkannt wurde (z.B. Auf beiden Geräten werden die Ampeln grün. Das \data\ setzt sich auf dem \sendev\ in Bewegung)
\item Receive-Animation: visualisiert dem Benutzer, dass das \data\ empfangen wurde (z.B. Das Objekt fährt auf den Schienen auf den Bildschirm des \recdev{}s)
\end{enumerate}
}

\newcommand{\designnotes}{
\begin{itemize}
\item[-] Beide involvierten Geräte benötigen einen Touchscreen.
\item[-] Da es sich bei Stitch to Take um eine synchrone Geste handelt, müssen die Geräte miteinander kommunizieren können, sodass die beiden Teile der Geste miteinander verglichen werden können.
\end{itemize}}

% -------------------------------
% WANN
% -------------------------------

\newcommand{\validcontext}{Situationen bei denen ein Benutzer ein \data\ von einem Gerät in unmittelbarer Nähe beziehen will (z.B. Teammitglieder ziehen sich Tasks, die auf einem Touch-Tisch angeordnet sind, auf ihr Smartphone).}

\newcommand{\simultaneously}{}
%\newcommand{\sequentially}{}

\newcommand{\private}{}
\newcommand{\semipublic}{}
\newcommand{\public}{}
\newcommand{\stationary}{}
\newcommand{\onthego}{}

%\newcommand{\leanback}{}
\newcommand{\leanforward}{}

\newcommand{\single}{}
\newcommand{\collaboration}{}
%\newcommand{\facetoface}{}
\newcommand{\sidetoside}{}
%\newcommand{\cornertocorner}{}

\newcommand{\notvalidcontext}{Anfordern von Daten von entfernten Geräten/Personen.}


\newcommand{\devicetabular}{
\begin{tabular}[H]{|c|c|c|c|c|c|}
\hline 
\diagbox{von}{nach}   & Smartwatch & Smartphone & Tablet & Tabletop & Screens \\ 
\hline 
Smartwatch            &            &            &        &         &         \\ 
\hline 
Smartphone            &            &     x      &   x    &    x   &         \\ 
\hline 
Tablet                &            &     x      &   x    &    x   &         \\ 
\hline 
Tabletop              &            &      x     &   x    &    x   &         \\ 
\hline
Screens               &            &            &        &        &         \\ 
\hline 
\end{tabular} }

% -------------------------------
% WARUM
% -------------------------------

%\newcommand{\established}{}
\newcommand{\candidate}{}
\newcommand{\realizable}{}
%\newcommand{\futuristic}{}

\newcommand{\otherpatterns}{
\begin{itemize}
\item Stitch To Give
\item Stitch To Extend
\item Stitch To Connect
\item Pinch To Connect
\item Spread To Disconnect
\end{itemize}
}

\newcommand{\stateoftheart}{
\begin{enumerate}
\item Erwähnung von Stitch-Gesten und Ableitung der Pinch-Geste \cite{Lucero2010}
\item Erste wissenschaftliche Erwähnung von Stitch-Gesten \cite{Hinckley2004}.
\item Bachelorthesis zu Stitch To Extend
\cite{Madden2015}.
\item Studienarbeit zu Interaktionen und Animationen im Multiscreen Kontext
\cite{Madden2016}.
\end{enumerate}
}

\newcommand{\designprinciples}{}

\newcommand{\imageschemata}{}
%\newcommand{\imageSchemaVoid}{}
\newcommand{\imageSchemaObject}{}
%\newcommand{\imageSchemaSubstance}{}
%\newcommand{\imageSchemaCenterPeriphery}{}
\newcommand{\imageSchemaContact}{}
%\newcommand{\imageSchemaFrontBack}{}
\newcommand{\imageSchemaLocation}{}
%\newcommand{\imageSchemaNearFar}{}
\newcommand{\imageSchemaPath}{}
\newcommand{\imageSchemaSourcePathGoal}{}
%\newcommand{\imageSchemaScale}{}
%\newcommand{\imageSchemaLeftRight}{}
\newcommand{\imageSchemaContainer}{}
\newcommand{\imageSchemaContent}{}
%\newcommand{\imageSchemaFullEmpty}{}
\newcommand{\imageSchemaInOut}{}
%\newcommand{\imageSchemaSurface}{}
%\newcommand{\imageSchemaMerging}{}
%\newcommand{\imageSchemaSplitting}{}
%\newcommand{\imageSchemaMomentum}{}
%\newcommand{\imageSchemaSelfMotion}{}
%\newcommand{\imageSchemaBigSmall}{}
%\newcommand{\imageSchemaFastSlow}{}
%\newcommand{\imageSchemaPartWhole}{}

\newcommand{\realworld}{}
\newcommand{\realworldNaivePhysic}{}
\newcommand{\realworldBodyAwareness}{}
\newcommand{\realworldEnvironmentAwareness}{}
\newcommand{\realworldSocialAwareness}{}

\newcommand{\metaphor}{}
\newcommand{\metaphordesc}{Ein Dokument von einem Schreibtisch nehmen}

% -------------------------------
% TECHNISCHES
% -------------------------------

\newcommand{\requiredTechnologies}{
Um Stitch To Take auf einem Gerät (\textit{Device}) einsetzen zu können, gibt es einige Voraussetzungen und Einschränkungen bezüglich der verfügbaren Technologien auf diesem Gerät. Ein Gerät ist dann für das Stitch To Take Pattern verwendbar, wenn es folgende Eigenschaften aufweist:
\begin{itemize}
\item \textbf{Input}: Für die Erkennung von Stitch-Gesten ist ein Touchscreen notwendig. Bezüglich der technischen Funktionsweise des \textit{Screens} (kapazitiv, resistiv etc.) gibt es keine Einschränkungen, da ein einzelner Touchpunkt von den meisten gängigen Technologien erkannt wird.
\item \textbf{Output}: Je nachdem, welches Feedback dem User gegeben werden soll, sind \textit{Output} per Bildschirm sowie Vibration und Sound denkbar, wobei letztere optional sind.
\item \textbf{Connectivity}: Ziel der Stitch To Take Geste ist die Dateiübertragung zwischen zwei Geräten, die bereits über ein Ad-Hoc Netzwerk wie Bluetooth oder WiFi Direct miteinander verbunden sind. Auch das Protokoll zur synchronen Gestenerkennung wird mittels dieser Verbindung durchgeführt.
\end{itemize}

Abbildung \ref{stitch_hardware} fasst die benötigten Technologien modellhaft zusammen.

\begin{figure}[h]
\includegraphics[width=\textwidth]{stitch_hardware.png}
\caption{Bentötigte Technlogien für das Stich To Take Pattern}
\label{stitch_hardware}
\end{figure}
}

\newcommand{\implementation}{
\subsubsection*{Erkennung synchroner Gesten}
Beim Stitch To Take handelt es sich um eine \gls{synchronegeste}, die in zwei Teile zerfällt:

\begin{itemize}
\item Erkennung der Einzelanteile einer synchronen Geste pro Gerät (\textit{Gesture
Detection}), entspricht jeweils der Erkennung für \glspl{einfachegeste}.
\item Vergleich der resultierenden \textit{Gesture Events} als Anteile an einer synchronen Geste
\end{itemize}

Da beide Geräte bereits miteinander verbunden sind, entfällt die zentrale Vermittlungskomponente (vgl. $\rightarrow$ Stitch To Connect), stattdessen können beide Geräte über ein Protokoll direkt miteinander kommunizieren.

Nach Registrierung bei der zentralen Vermittlungskomponente führen Geräte kontinuierlich eine lokale, einfache Gestenerkennung basierend auf Sensordaten (Hard- oder Software) durch (\textit{Gesture Detection)}. Wurde  eine Geste lokal erkannt und an das entsprechende \textit{GestureEvent} an die Vermittlungskomponente gesendet, entscheidet diese, ob alle erforderlichen komplementären Anteile der synchronen Geste durch andere Geräte ebenfalls übermittelt wurden (\textit{Gesture Event Matching}). Die folgenden beiden Kapitel erläutern diese beiden Schritte für die Stitch To Take Geste jeweils im Detail.

\subsubsection*{Stitch Gesture Detection}
Die lokale Erkennung einer Stitch-Geste entspricht der Erkennung von Swipes (da die einzelne Anteile eines Stitches lediglich einfache Swipe-Gesten sind). Die Erkennung von Swipe Gesten ist in der Patternbeschreibung zu $\rightarrow$ Swipe To Give ausführlich dokumentiert.\\

Hier müssen lediglich im erzeugten Swipe-Event zusätzliche Parameter erfasst werden, die das \textit{Stitch Event Matching} ermöglichen, wie z.B. ein Zeitstempel (\texttt{timestamp}) oder der Ein- bzw. Austrittswinkel des Swipes aus dem Bildschirm (\texttt{angle}). Zudem sollten Swipe-Gesten, die Teil von Stitch-Gesten sind, über Constraints so eingeschränkt werden, dass nur solche lokalen Swipes zulässig sind, die ein Stitch ermöglichen (bspw. nur Swipes von links nach rechts).

\subsubsection*{Stitch Protokoll}
Neben lokal erkannten Swipe-Anteilen der Stitch Geste können auch Swipe-Anteile der Gegenseite empfangen werden. Abbildung \ref{stitch_protocol} zeigt alle möglichen Zustände, die dabei auf einem Gerät angenommen werden können.\\

Von einem initialen \texttt{idle}-Zustand können entweder \texttt{Inbound} oder \texttt{Outbound}-Swipes erkannt werden, also Swipe-Gesten in Richtung des Bildschirmrandes oder vom Rand weg. Bei erkanntem \texttt{Inbound}-Swipe wird auf ein \texttt{Syn}-Paket gewartet (Zustand \texttt{In}), das die Gegenseite bei erkannten \textit{Outbound}-Swipe versendet; bei erkanntem \texttt{Outbound}-Swipe hingegen wird das \texttt{Syn}-Paket aktiv gesendet und auf ein \texttt{Ack}-Paket gewartet (Zustand \texttt{out}). \texttt{Syn}-Pakete werden jeweils mit einem \texttt{Ack}-Paket beantwortet, sofern das \textit{Stitch Event Matching} (s. folgendes Kapitel) erfolgreich war. Eine erfolgreiche Abfolge von \texttt{Syn}- und \texttt{Ack}-Paketen innerhalb eines gewissen Timeouts (hier exemplarisch 2 Sekunden) markiert eine erfolgreich erkannte Stitch-Geste.\\

\begin{figure}[h]
\includegraphics[width=\textwidth]{stitch_protocol.png}
\caption{Stitch Protokoll zur Verarbeitung lokaler und empfangener Anteile der synchronen Geste}
\label{stitch_protocol}
\end{figure}

Ein Sonderfall ergibt sich, wenn ein \texttt{Syn}-Paket im \texttt{idle}-Zustand empfangen wird, ohne dass ein \texttt{Inbound}-Swipe erfolgt ist. Das kann der Fall sein, wenn die Gegenseite einen \texttt{Outbound}-Swipe erkennt und das \texttt{Syn}-Paket schneller sendet, als die eigene lokale Gestenerkennung den entsprechenden \texttt{Inbound}-Swipe registriert. In dem Fall wird innerhalb eines Timeout-Fensters auf die lokale Geste gewartet.

\subsubsection*{Stitch Event Matching}
Ein Gerät führt ein Stitch Event Matching durch, wenn von der Gegenseite ein \textit{StitchEvent} innerhalb eines \texttt{Syn}-Paketes empfangen wurde, das als komplementärer Anteil eines lokalen \textit{Stitch-Events} in Frage kommen könnte. Abbildung \ref{stitch_event_matching} veranschaulicht einen exemplarischen Ablauf dieses Vergleiches.

\begin{figure}[h]
\includegraphics[width=\textwidth]{stitch_event_matching.png}
\caption{Stitch Event Matching}
\label{stitch_event_matching}
\end{figure}

Die Auswertung basiert in diesem Beispiel auf drei Parametern der jeweiligen \textit{StitchEvents}:
\begin{itemize}
\item \texttt{timestamp}: Vergleich der Differenz zwischen dem Ende des Swipes auf Gerät A (\texttt{time\_up}) und dem Beginn des Swipes auf Gerät B (\texttt{time\_down}) mit einer maximal erlaubten Differenz von 1500ms.
\item \texttt{angle}: Vergleich der Ein- und Austrittswinkel der beiden \textit{StitchEvents} mit einer Toleranz von 20 Grad.
\item \texttt{direction}: Vergleich der Richtung der beiden Swipes (hier nur links oder rechts vorgesehen).
\end{itemize}

Weitere Parameter oder eine andere Interpretation der Werte bzw. eine Anpassung der Toleranzbereiche ermöglichen eine Anpassung der Stitch Geste.

Entsprechend dem Lebenszyklus einer Multiscreen-Applikation ist die Voraussetzung für Stitch To Take eine bestehende Verbindung zwischen zwei Geräten (vorangegangener \textit{Connect}) und die Auswahl zu übermittelnder Daten (\textit{Select}) auf dem \sendev{}. Stitch To Take kann mehrmals hintereinander ausgeführt werden (Sequenz von \textit{Transfers}), solange kein \textit{Disconnect} erfolgt ist. \\

Weitergehende Informationen zum Applikations-Lebenszyklus und den weiteren
Gestaltungsmöglichkeiten für den \textit{Transfer}, \textit{Feedbacks} etc. finden sich
auf der \developerpage.
}

% -------------------------------
% SONSTIGES
% -------------------------------

\newcommand{\authors}{Horst Schneider, Hochschule Mannheim\\
Dominick Madden, Hochschule Mannheim}
\newcommand{\versionhistory}{10.05.2017}
\newcommand{\dateofcreation}{17.09.2015}


% template inkludieren --------------

\input{template.tex}